<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Momas Network | Staking Ecosystem</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');
        
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #fcfcfd;
            color: #1a1a1a;
            overflow-x: hidden;
        }

        /* Hiệu ứng nền khuếch tán để tạo sự liền mạch giữa Head và Body */
        .bg-mesh {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: 
                radial-gradient(at 0% 0%, rgba(168, 85, 247, 0.05) 0px, transparent 50%),
                radial-gradient(at 100% 0%, rgba(59, 130, 246, 0.05) 0px, transparent 50%);
            z-index: -1;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.03);
            border-radius: 32px;
        }

        .action-button {
            background: #000;
            color: #fff;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 30px -5px rgba(0, 0, 0, 0.2);
        }

        /* Ẩn thanh cuộn nhưng vẫn cuộn được */
        ::-webkit-scrollbar { width: 0px; background: transparent; }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <div class="bg-mesh"></div>

    <header class="w-full max-w-6xl mx-auto px-6 py-8 flex justify-between items-center">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-black rounded-xl flex items-center justify-center">
                <i class="fas fa-cube text-white text-xl"></i>
            </div>
            <span class="text-xl font-extrabold tracking-tight">MOMAS</span>
        </div>
        
        <div class="flex items-center gap-4">
            <button id="connectButton" class="bg-white border border-gray-100 px-6 py-2.5 rounded-full text-sm font-bold shadow-sm hover:bg-gray-50 transition-all">
                Connect Wallet
            </button>
        </div>
    </header>

    <main class="flex-grow flex flex-col items-center px-4 pt-4 pb-20">
        <div class="w-full max-w-[460px]">
            
            <div class="glass-card p-8 relative overflow-hidden">
                <div class="flex justify-center mb-6">
                    <span class="bg-green-100 text-green-600 text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-widest">
                        ● Live Pre-sale
                    </span>
                </div>

                <h2 class="text-3xl font-extrabold text-center mb-2">Stake & Earn</h2>
                <p class="text-center text-gray-400 text-sm mb-10">Mạng lưới phi tập trung thế hệ mới</p>

                <div class="grid grid-cols-2 gap-4 mb-8">
                    <div class="bg-gray-50/50 p-4 rounded-2xl border border-gray-100/50">
                        <p class="text-[10px] font-bold text-gray-400 uppercase mb-1">My Momas</p>
                        <p class="text-lg font-bold" id="momasAmount">0.00</p>
                    </div>
                    <div class="bg-gray-50/50 p-4 rounded-2xl border border-gray-100/50 text-right">
                        <p class="text-[10px] font-bold text-gray-400 uppercase mb-1">Wallet USDT</p>
                        <p class="text-lg font-bold text-purple-600" id="usdtBalance">0.00</p>
                    </div>
                </div>

                <div class="mb-8">
                    <div class="flex justify-between mb-2 px-1">
                        <span class="text-xs font-bold text-gray-500 uppercase">Input Amount</span>
                        <button onclick="setMax()" class="text-xs font-bold text-purple-600">Max</button>
                    </div>
                    <div class="relative">
                        <input type="number" id="usdtAmount" 
                            class="w-full bg-gray-50 border-2 border-transparent focus:border-purple-100 focus:bg-white rounded-2xl px-5 py-5 text-2xl font-black outline-none transition-all" 
                            placeholder="0.00">
                        <span class="absolute right-5 top-1/2 -translate-y-1/2 font-bold text-gray-300">USDT</span>
                    </div>
                    <p class="mt-3 text-center text-xs text-gray-400 font-medium">
                        You will receive: <span id="estimatedMomas" class="text-black font-bold">0.00</span> MOMAS
                    </p>
                </div>

                <button id="approveButton" class="action-button w-full py-5 rounded-2xl font-black text-lg mb-4">
                    APPROVE & STAKE
                </button>
                <p id="networkStatus" class="text-center text-[11px] font-bold text-red-500"></p>

                <div class="mt-10 pt-8 border-t border-gray-100/50">
                    <p class="text-center text-[10px] font-bold text-gray-400 uppercase tracking-[0.3em] mb-4">Sale ends in</p>
                    <div class="flex justify-center gap-4">
                        <div class="text-center min-w-[50px]">
                            <span id="days" class="text-xl font-black block">00</span>
                            <span class="text-[9px] text-gray-400 font-bold uppercase">Days</span>
                        </div>
                        <div class="text-center min-w-[50px]">
                            <span id="hours" class="text-xl font-black block text-purple-600">00</span>
                            <span class="text-[9px] text-gray-400 font-bold uppercase">Hrs</span>
                        </div>
                        <div class="text-center min-w-[50px]">
                            <span id="minutes" class="text-xl font-black block">00</span>
                            <span class="text-[9px] text-gray-400 font-bold uppercase">Min</span>
                        </div>
                        <div class="text-center min-w-[50px]">
                            <span id="seconds" class="text-xl font-black block">00</span>
                            <span class="text-[9px] text-gray-400 font-bold uppercase">Sec</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-6 p-6 glass-card !rounded-2xl flex items-center justify-between border-dashed">
                <div>
                    <p class="text-xs font-bold text-gray-400 uppercase tracking-tighter">Referral Link</p>
                    <p class="text-sm font-bold truncate max-w-[200px]" id="refDisplay">Connect wallet to view</p>
                </div>
                <button onclick="copyRef()" class="bg-black text-white px-4 py-2 rounded-xl text-xs font-bold">Copy</button>
            </div>
        </div>
    </main>

    <footer class="w-full max-w-6xl mx-auto px-6 py-10 text-center">
        <p class="text-[11px] font-bold text-gray-300 uppercase tracking-[0.2em]">© 2025 Momas Ecosystem • Built on BSC</p>
    </footer>

    <script>
        let web3;
        let userAccount;
        const MOMAS_RATE = 10; // 1 USDT = 10 MOMAS
        const BSC_CHAIN_ID = 56;
        const END_DATE = new Date("Jan 7, 2026 00:00:00").getTime();

        // 1. Khởi tạo Countdown
        function initCountdown() {
            const timer = setInterval(() => {
                const now = new Date().getTime();
                const dist = END_DATE - now;
                if (dist < 0) { clearInterval(timer); return; }
                document.getElementById("days").innerText = Math.floor(dist / (86400000)).toString().padStart(2,'0');
                document.getElementById("hours").innerText = Math.floor((dist % 86400000) / 3600000).toString().padStart(2,'0');
                document.getElementById("minutes").innerText = Math.floor((dist % 3600000) / 60000).toString().padStart(2,'0');
                document.getElementById("seconds").innerText = Math.floor((dist % 60000) / 1000).toString().padStart(2,'0');
            }, 1000);
        }

        // 2. Kết nối ví (Giữ nguyên logic chính của bạn)
        async function connectWallet() {
            if (window.ethereum) {
                web3 = new Web3(window.ethereum);
                try {
                    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                    userAccount = accounts[0];
                    document.getElementById('connectButton').innerText = userAccount.slice(0,6) + '...' + userAccount.slice(-4);
                    document.getElementById('refDisplay').innerText = `momas.net/?ref=${userAccount.slice(0,6)}`;
                    
                    const chainId = await web3.eth.getChainId();
                    if (chainId !== BSC_CHAIN_ID) {
                        document.getElementById('networkStatus').innerText = "Wrong Network! Please switch to BSC Mainnet";
                    } else {
                        document.getElementById('networkStatus').innerText = "";
                        updateBalances();
                    }
                } catch (err) {
                    console.error("User denied account access");
                }
            } else {
                alert("Please install MetaMask!");
            }
        }

        // 3. Xử lý số dư & Ước tính
        function setMax() {
            const bal = document.getElementById('usdtBalance').innerText;
            document.getElementById('usdtAmount').value = bal;
            updateEst();
        }

        function updateEst() {
            const val = document.getElementById('usdtAmount').value;
            document.getElementById('estimatedMomas').innerText = (val * MOMAS_RATE).toLocaleString();
        }
        document.getElementById('usdtAmount').addEventListener('input', updateEst);

        async function updateBalances() {
            // Đây là nơi bạn dán code lấy balance USDT từ Smart Contract cũ của bạn
            // Ví dụ: const balance = await usdtContract.methods.balanceOf(userAccount).call();
            document.getElementById('usdtBalance').innerText = "250.00"; // Fake mẫu để bạn thấy giao diện
        }

        // 4. Sự kiện nút bấm
        document.getElementById('connectButton').onclick = connectWallet;
        document.getElementById('approveButton').onclick = async () => {
            if(!userAccount) return connectWallet();
            
            // Dán Logic Approve & Stake cũ của bạn vào đây
            // Chú ý: Giữ nguyên tên các biến usdtAmount.value
            alert("Đang thực hiện giao dịch cho: " + document.getElementById('usdtAmount').value + " USDT");
        };

        function copyRef() {
            if(!userAccount) return alert("Please connect wallet first");
            navigator.clipboard.writeText(document.getElementById('refDisplay').innerText);
            alert("Referral link copied!");
        }

        // Chạy khi trang load
        window.onload = initCountdown;
    </script>
</body>
</html>
